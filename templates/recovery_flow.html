<script>
    document.addEventListener("DOMContentLoaded", function () {
        const activateBtn = document.getElementById("activateBtn");
        const messageBox = document.getElementById("messageBox");

        activateBtn.addEventListener("click", async function () {
            activateBtn.innerText = "✅ تم التفعيل";
            activateBtn.disabled = true;

            try {
                const response = await fetch("/trigger-recovery", {
                    method: "POST"
                });
                const data = await response.json();
                messageBox.innerText = data.message;
                messageBox.style.display = "block";
            } catch (error) {
                messageBox.innerText = "حدث خطأ في الاتصال بالنظام السيادي.";
                messageBox.style.color = "red";
                messageBox.style.display = "block";
            }
        });
    });
</script>
